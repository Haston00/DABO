{% extends "base.html" %}

{% block title %}DABO â€” McCrory Construction{% endblock %}

{% block head %}
<style>
    body { margin: 0; overflow: hidden; }

    .splash-wrap {
        position: fixed; inset: 0;
        display: flex; align-items: center; justify-content: center;
        z-index: 10;
    }

    /* YouTube background */
    .video-bg {
        position: fixed; inset: 0; z-index: 0;
        overflow: hidden; background: #001B2B;
    }
    .video-bg iframe {
        position: absolute;
        top: 50%; left: 50%;
        width: 180vw; height: 180vh;
        transform: translate(-50%, -50%);
        pointer-events: none;
    }

    /* Dark overlay */
    .splash-overlay {
        position: fixed; inset: 0; z-index: 1;
        background: linear-gradient(
            135deg,
            rgba(0,27,43,0.85) 0%,
            rgba(0,38,58,0.75) 40%,
            rgba(0,38,58,0.80) 100%
        );
    }

    /* Content */
    .splash-content {
        position: relative; z-index: 2;
        text-align: center;
        opacity: 0;
        animation: fadeUp 1.2s ease-out 0.5s forwards;
    }

    .splash-title {
        font-size: clamp(5rem, 15vw, 12rem);
        font-weight: 900;
        color: #FFFFFF;
        letter-spacing: -4px;
        line-height: 1;
        text-shadow:
            0 0 60px rgba(255,90,25,0.4),
            0 0 120px rgba(255,90,25,0.2),
            0 4px 20px rgba(0,0,0,0.5);
    }

    .splash-tagline {
        font-size: clamp(0.75rem, 1.5vw, 1.1rem);
        font-weight: 700;
        letter-spacing: 6px;
        text-transform: uppercase;
        color: #FF5A19;
        margin-top: 0.5rem;
    }

    .splash-company {
        font-size: clamp(0.9rem, 1.8vw, 1.3rem);
        font-weight: 500;
        color: rgba(239,234,226,0.7);
        margin-top: 1.5rem;
        letter-spacing: 2px;
    }

    /* Enter button */
    .enter-btn {
        display: inline-block;
        margin-top: 3rem;
        padding: 1rem 3.5rem;
        background: linear-gradient(135deg, #FF5A19 0%, #FF7A40 100%);
        color: white;
        font-size: 1.1rem;
        font-weight: 800;
        letter-spacing: 4px;
        text-transform: uppercase;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow:
            0 4px 20px rgba(255,90,25,0.4),
            0 0 40px rgba(255,90,25,0.1);
        animation: pulse 2.5s ease-in-out infinite;
    }
    .enter-btn:hover {
        transform: translateY(-3px) scale(1.03);
        box-shadow:
            0 8px 30px rgba(255,90,25,0.5),
            0 0 60px rgba(255,90,25,0.2);
    }
    .enter-btn:active {
        transform: translateY(0) scale(0.98);
    }

    /* Fade-out transition */
    .splash-wrap.fade-out {
        opacity: 0;
        transition: opacity 0.8s ease;
        pointer-events: none;
    }

    @keyframes fadeUp {
        from { opacity: 0; transform: translateY(30px); }
        to { opacity: 1; transform: translateY(0); }
    }
    @keyframes pulse {
        0%, 100% { box-shadow: 0 4px 20px rgba(255,90,25,0.4), 0 0 40px rgba(255,90,25,0.1); }
        50% { box-shadow: 0 4px 30px rgba(255,90,25,0.6), 0 0 60px rgba(255,90,25,0.25); }
    }
</style>
{% endblock %}

{% block body %}
<div class="splash-wrap" id="splashWrap">
    <!-- YouTube video background: Clemson running down the hill -->
    <div class="video-bg">
        <iframe
            id="ytPlayer"
            src="https://www.youtube.com/embed/F5eFMa1NbjM?autoplay=1&mute=1&loop=1&playlist=F5eFMa1NbjM&controls=0&showinfo=0&modestbranding=1&rel=0&iv_load_policy=3&playsinline=1"
            frameborder="0"
            allow="autoplay; encrypted-media"
            allowfullscreen>
        </iframe>
    </div>

    <!-- Dark overlay -->
    <div class="splash-overlay"></div>

    <!-- Center content -->
    <div class="splash-content">
        <div class="splash-title">DABO</div>
        <div class="splash-tagline">AI-Powered Plan Review & Scheduling</div>
        <div class="splash-company">McCrory Construction</div>
        <button class="enter-btn" id="enterBtn" onclick="enterDashboard()">
            ENTER
        </button>
    </div>
</div>

<script src="{{ url_for('static', filename='js/splash.js') }}"></script>

<!-- Hidden audio for Tiger Rag (plays on click) -->
<audio id="fightSong" preload="auto">
    <source src="https://upload.wikimedia.org/wikipedia/commons/5/55/Tiger_Rag.ogg" type="audio/ogg">
</audio>

<script>
    // Play fight song on first interaction
    let songStarted = false;
    document.addEventListener('click', function() {
        if (!songStarted) {
            const audio = document.getElementById('fightSong');
            audio.volume = 0.3;
            audio.play().catch(() => {});
            songStarted = true;
        }
    }, { once: false });

    function enterDashboard() {
        const wrap = document.getElementById('splashWrap');
        const audio = document.getElementById('fightSong');
        wrap.classList.add('fade-out');
        audio.pause();
        setTimeout(() => {
            window.location.href = '/dashboard';
        }, 800);
    }
</script>
{% endblock %}
